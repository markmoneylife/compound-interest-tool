<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ETFé…æ¯åœ–å¡ç€‘å¸ƒç‰†ï¼‹é…æ¯å…¥å¸³æ™‚é–“è¡¨ï½œå³é¦¬å…‹</title>

  <!-- âœ… OG ç¶²ç«™ç¸®åœ– -->
  <link rel="icon" href="https://markmoney738404280.wordpress.com/wp-content/uploads/2025/06/e8a487e588a9e8a9a6e7ae97e5b7a5e585b7.png" type="image/png">

  <!-- âœ… OG for ETFé…æ¯åœ–å¡ç€‘å¸ƒç‰† -->
  <meta property="og:title" content="ETFé…æ¯åœ–å¡ç€‘å¸ƒç‰†ï½œæ®–åˆ©ç‡ Ã— å…¥å¸³æ™‚é–“ä¸€çœ¼æŒæ¡ï½œé¦¬å…‹ç†è²¡" />
  <meta property="og:description" content="æ¯æœˆæ›´æ–°çš„ETFé…æ¯åœ–å¡è¦–è¦ºç€‘å¸ƒç‰†ï¼ŒåŒ…å«æ®–åˆ©ç‡ã€ç™¼æ”¾æ—¥èˆ‡æ”¶ç›Šçµ„æˆï¼Œè®“ä½ è¼•é¬†è¿½è¹¤é«˜è‚¡æ¯è³‡è¨Šã€‚" />
  <meta property="og:image" content="https://markmoney738404280.wordpress.com/wp-content/uploads/2025/06/e8a487e588a9e8a9a6e7ae97e5b7a5e585b7.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:url" content="https://markmoneylife.com/etf-dividend-wall/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="é¦¬å…‹ç†è²¡å·¥å…·ç®±" />

  <!-- âœ… Twitter é è¦½ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ETFé…æ¯åœ–å¡ç€‘å¸ƒç‰†ï½œæ®–åˆ©ç‡ Ã— å…¥å¸³æ™‚é–“ä¸€çœ¼æŒæ¡ï½œé¦¬å…‹ç†è²¡">
  <meta name="twitter:description" content="æ¯æœˆæ›´æ–°çš„ETFé…æ¯åœ–å¡ç€‘å¸ƒç‰†ï¼ŒåŒ…å«æ®–åˆ©ç‡ã€ç™¼æ”¾æ—¥èˆ‡æ”¶ç›Šçµ„æˆï¼Œè®“ä½ è¼•é¬†è¿½è¹¤é«˜è‚¡æ¯è³‡è¨Šã€‚">
  <meta name="twitter:image" content="https://markmoney738404280.wordpress.com/wp-content/uploads/2025/06/e8a487e588a9e8a9a6e7ae97e5b7a5e585b7.png">

  <meta name="description" content="è¦–è¦ºåŒ–é¡¯ç¤ºå°è‚¡ETFæœ€æ–°é…æ¯è³‡è¨Šèˆ‡å¯¦éš›å…¥å¸³æ™‚é–“ï¼Œè®“ä½ å¿«é€ŸæŒæ¡æ®–åˆ©ç‡èˆ‡ç™¼æ”¾æ—¥ã€‚">
  <meta name="keywords" content="ETFé…æ¯, é«˜è‚¡æ¯ETF, å°è‚¡ETF, å–®æœŸæ®–åˆ©ç‡, ç™¼æ”¾æ—¥, å³é¦¬å…‹">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <style>
    /* ========= Mark-UIï¼ˆé »é“ç¶²ç«™ï¼‰é¢¨æ ¼ï¼šæ·±ç¶ ï¼‹æ·±è—ï¼‹å°‘é‡æš–é»ƒ ========= */
    :root{
      --bg: #020911;
      --bg2:#071623;
      --panel:#06252c;
      --panel2:#052b34;
      --border: rgba(148,163,184,.22);
      --text:#E8EEF6;
      --muted: rgba(232,238,246,.72);

      --g1:#0B3B2E;    /* æ·±ç¶  */
      --g2:#1D4A35;    /* ç¶  */
      --b1:#0A2A4A;    /* æ·±è— */
      --b2:#0B3A6A;    /* è— */

      --accent:#FFD54F;        /* æš–é»ƒ */
      --accent2:#FFE082;

      --shadow: 0 18px 40px rgba(0,0,0,.45);
      --shadow2: 0 10px 22px rgba(0,0,0,.35);
      --r: 18px;
    }

    html,body{ height:100%; }
    body{
      background:
        radial-gradient(1200px 900px at 20% -10%, rgba(29,74,53,.45), transparent 55%),
        radial-gradient(1000px 900px at 95% 5%, rgba(10,58,106,.40), transparent 55%),
        radial-gradient(900px 700px at 40% 110%, rgba(255,213,79,.10), transparent 55%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
      color: var(--text);
    }

    /* å°æ˜Ÿé»ï¼ˆå¾ˆæ·¡ï¼Œä¸æ¶ï¼‰ */
    .starfield{
      position: fixed;
      inset: 0;
      pointer-events:none;
      opacity:.35;
      background-image:
        radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,.35) 50%, transparent 52%),
        radial-gradient(1px 1px at 80% 25%, rgba(255,255,255,.25) 50%, transparent 52%),
        radial-gradient(1px 1px at 55% 60%, rgba(255,255,255,.22) 50%, transparent 52%),
        radial-gradient(1px 1px at 30% 75%, rgba(255,255,255,.18) 50%, transparent 52%),
        radial-gradient(1px 1px at 70% 80%, rgba(255,255,255,.16) 50%, transparent 52%);
      background-size: 420px 420px, 520px 520px, 620px 620px, 720px 720px, 820px 820px;
      mix-blend-mode: screen;
      filter: blur(.2px);
    }

    /* ========= é ‚éƒ¨å›ºå®šå°è¦½ ========= */
    .nav-toggle{
      display:none;
      position: fixed;
      top: .85rem;
      right: .85rem;
      z-index: 9999;
      background: linear-gradient(135deg, rgba(255,213,79,.95), rgba(255,224,130,.95));
      border: 1px solid rgba(0,0,0,.15);
      padding: .6rem .95rem;
      border-radius: .75rem;
      font-size: 1.05rem;
      font-weight: 800;
      cursor: pointer;
      box-shadow: var(--shadow2);
      color: #0B1220;
    }

    .nav-bar-wrapper{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(2,9,17,.82), rgba(2,9,17,.55));
      border-bottom: 1px solid rgba(148,163,184,.18);
    }

    .nav-shell{
      max-width: 1180px;
      margin: 0 auto;
      padding: 1rem 1rem;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 1rem;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:.75rem;
      min-width: 220px;
    }

    .brand-badge{
      width: 40px;
      height: 40px;
      border-radius: 14px;
      background:
        radial-gradient(18px 18px at 30% 35%, rgba(255,213,79,.35), transparent 55%),
        linear-gradient(135deg, rgba(29,74,53,.95), rgba(10,58,106,.95));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 12px 26px rgba(0,0,0,.35);
      display:flex;
      align-items:center;
      justify-content:center;
      color: rgba(255,255,255,.9);
      font-weight: 900;
      letter-spacing: .02em;
    }

    .brand-title{
      line-height:1.1;
    }
    .brand-title strong{
      display:block;
      font-size: .95rem;
      font-weight: 900;
      color: rgba(255,255,255,.92);
    }
    .brand-title span{
      display:block;
      font-size: .72rem;
      color: rgba(232,238,246,.62);
    }

    .nav-bar{
      display:flex;
      flex-wrap: wrap;
      justify-content:flex-end;
      gap: .6rem;
    }

    .nav-bar a{
      text-decoration:none;
      padding: .62rem .95rem;
      border-radius: 999px;
      font-weight: 800;
      font-size: .9rem;
      color: rgba(232,238,246,.88);
      background: linear-gradient(135deg, rgba(6,37,44,.85), rgba(5,43,52,.85));
      border: 1px solid rgba(148,163,184,.18);
      box-shadow: 0 10px 18px rgba(0,0,0,.25);
      transition: transform .18s, box-shadow .18s, border-color .18s, background .18s;
    }
    .nav-bar a:hover{
      transform: translateY(-2px);
      box-shadow: 0 14px 26px rgba(0,0,0,.35);
      border-color: rgba(255,213,79,.35);
      background: linear-gradient(135deg, rgba(6,37,44,.95), rgba(5,43,52,.95));
    }

    .nav-bar a.cta{
      color: #0B1220;
      background: linear-gradient(135deg, rgba(255,213,79,.98), rgba(255,224,130,.98));
      border: 1px solid rgba(0,0,0,.12);
    }
    .nav-bar a.cta:hover{
      border-color: rgba(255,255,255,.12);
      box-shadow: 0 16px 30px rgba(255,213,79,.16), 0 14px 26px rgba(0,0,0,.35);
    }

    @media (max-width: 900px){
      .brand{ min-width: auto; }
      .nav-bar{ display:none; flex-direction: column; align-items: stretch; width: 100%; }
      .nav-bar.active{ display:flex; }
      .nav-shell{ flex-direction: column; align-items: stretch; }
      .nav-toggle{ display:block; }
      .nav-bar a{ width: 100%; text-align:center; border-radius: 14px; }
    }

    /* ========= ç‰ˆé¢å®¹å™¨ ========= */
    .page-shell{
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.5rem 1rem 0;
    }

    .hero{
      margin-top: 1.25rem;
      border-radius: calc(var(--r) + 8px);
      padding: 1.4rem 1.2rem;
      background:
        radial-gradient(900px 420px at 15% 0%, rgba(29,74,53,.45), transparent 60%),
        radial-gradient(900px 420px at 95% 10%, rgba(10,58,106,.40), transparent 60%),
        linear-gradient(135deg, rgba(6,37,44,.82), rgba(5,43,52,.78));
      border: 1px solid rgba(148,163,184,.20);
      box-shadow: var(--shadow);
    }

    .hero h1{
      font-size: 1.75rem;
      font-weight: 950;
      letter-spacing: .01em;
      color: rgba(255,255,255,.92);
      text-align:center;
      margin-bottom: .35rem;
    }
    .hero p{
      text-align:center;
      color: rgba(232,238,246,.70);
      font-size: .92rem;
      line-height: 1.7;
      margin-bottom: .75rem;
    }

    .meta-row{
      display:flex;
      flex-wrap:wrap;
      gap:.6rem;
      align-items:center;
      justify-content:center;
      color: rgba(232,238,246,.65);
      font-size: .78rem;
    }
    .meta-pill{
      display:inline-flex;
      gap:.4rem;
      align-items:center;
      padding:.42rem .7rem;
      border-radius: 999px;
      background: rgba(2,9,17,.35);
      border: 1px solid rgba(148,163,184,.18);
    }
    .meta-row a{
      color: rgba(255,213,79,.92);
      text-decoration: none;
      font-weight: 800;
    }
    .meta-row a:hover{ text-decoration: underline; }

    /* ========= å€å¡Šå¡ç‰‡ ========= */
    .section-card{
      margin-top: 1.2rem;
      border-radius: calc(var(--r) + 6px);
      background: linear-gradient(135deg, rgba(6,37,44,.78), rgba(5,43,52,.74));
      border: 1px solid rgba(148,163,184,.18);
      box-shadow: var(--shadow2);
      padding: 1.15rem 1.1rem;
    }

    .section-title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: .8rem;
      margin-bottom: .75rem;
    }
    .section-title h2{
      font-size: 1.08rem;
      font-weight: 950;
      color: rgba(255,255,255,.90);
      letter-spacing: .01em;
    }
    .section-title .hint{
      font-size: .78rem;
      color: rgba(232,238,246,.62);
    }

    /* ========= æ¨¡å¼åˆ‡æ› ========= */
    .mode-switch{
      display:flex;
      gap:.6rem;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 1rem;
    }
    .btn{
      border:none;
      cursor:pointer;
      padding:.72rem 1rem;
      border-radius: 999px;
      font-weight: 900;
      font-size: .92rem;
      transition: transform .18s, box-shadow .18s, opacity .18s, border-color .18s, background .18s;
      box-shadow: 0 12px 24px rgba(0,0,0,.28);
    }
    .btn:active{ transform: translateY(1px); }

    .btn-primary{
      color: #0B1220;
      background: linear-gradient(135deg, rgba(255,213,79,.98), rgba(255,224,130,.98));
      border: 1px solid rgba(0,0,0,.12);
    }
    .btn-ghost{
      color: rgba(232,238,246,.88);
      background: linear-gradient(135deg, rgba(2,9,17,.35), rgba(2,9,17,.22));
      border: 1px solid rgba(148,163,184,.18);
    }
    .btn:hover{
      transform: translateY(-2px);
      box-shadow: 0 16px 30px rgba(0,0,0,.38);
    }

    /* ========= Top5 å¡ç‰‡ ========= */
    .top5-grid{
      display:grid;
      grid-template-columns: repeat(1, minmax(0, 1fr));
      gap: .85rem;
    }
    @media (min-width: 640px){
      .top5-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (min-width: 1024px){
      .top5-grid{ grid-template-columns: repeat(5, minmax(0, 1fr)); }
    }

    .top5-card{
      border-radius: var(--r);
      padding: 1rem .95rem;
      background:
        radial-gradient(120px 120px at 25% 20%, rgba(255,213,79,.18), transparent 60%),
        linear-gradient(135deg, rgba(6,37,44,.82), rgba(5,43,52,.78));
      border: 1px solid rgba(148,163,184,.18);
      box-shadow: 0 14px 26px rgba(0,0,0,.34);
      transition: transform .18s, box-shadow .18s, border-color .18s;
      text-align:center;
    }
    .top5-card:hover{
      transform: translateY(-3px);
      border-color: rgba(255,213,79,.34);
      box-shadow: 0 18px 34px rgba(0,0,0,.42);
    }
    .top5-card .code{ font-weight: 950; font-size: 1.15rem; color: rgba(255,255,255,.92); }
    .top5-card .name{ font-size: .78rem; color: rgba(232,238,246,.68); margin-top:.25rem; min-height: 2.2em; }
    .top5-card .rate{ font-weight: 950; font-size: 1.35rem; color: rgba(255,213,79,.98); margin-top:.35rem; }

    /* ========= ç€‘å¸ƒç‰†å¡ç‰‡ ========= */
    .grid-cards{
      display:grid;
      grid-template-columns: repeat(1, minmax(0, 1fr));
      gap: 1rem;
    }
    @media (min-width: 640px){
      .grid-cards{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (min-width: 1024px){
      .grid-cards{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }

    .etf-card{
      border-radius: calc(var(--r) + 8px);
      padding: 1.05rem 1.05rem 1rem;
      background:
        radial-gradient(240px 200px at 12% 10%, rgba(29,74,53,.48), transparent 60%),
        radial-gradient(240px 200px at 92% 20%, rgba(10,58,106,.40), transparent 62%),
        linear-gradient(135deg, rgba(6,37,44,.86), rgba(5,43,52,.82));
      border: 1px solid rgba(148,163,184,.20);
      box-shadow: 0 16px 34px rgba(0,0,0,.44);
      transition: transform .18s, box-shadow .18s, border-color .18s;
    }
    .etf-card:hover{
      transform: translateY(-4px);
      border-color: rgba(255,213,79,.28);
      box-shadow: 0 20px 44px rgba(0,0,0,.52);
    }

    .etf-card .head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: .6rem;
    }
    .badge-freq{
      font-size: .72rem;
      font-weight: 950;
      padding: .35rem .6rem;
      border-radius: 999px;
      color: rgba(255,255,255,.92);
      background: rgba(255,213,79,.12);
      border: 1px solid rgba(255,213,79,.22);
      white-space: nowrap;
    }
    .code-big{
      font-size: 1.75rem;
      font-weight: 1000;
      color: rgba(255,213,79,.98);
      letter-spacing: .02em;
    }
    .etf-name{
      margin-top: .15rem;
      font-size: 1.06rem;
      font-weight: 950;
      color: rgba(255,255,255,.90);
    }

    .two-box{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: .75rem;
      margin-top: .9rem;
    }
    .info-box{
      border-radius: var(--r);
      padding: .85rem .75rem;
      background: rgba(2,9,17,.35);
      border: 1px solid rgba(148,163,184,.18);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
      text-align:center;
    }
    .info-box .label{
      font-size: .72rem;
      color: rgba(232,238,246,.62);
      margin-bottom: .2rem;
      font-weight: 800;
    }
    .info-box .value{
      font-size: 1.25rem;
      font-weight: 1000;
      color: rgba(255,255,255,.92);
    }
    .info-box.accent{
      background: rgba(255,213,79,.12);
      border-color: rgba(255,213,79,.22);
    }
    .info-box.accent .value{ color: rgba(255,213,79,.98); }

    .mini-grid{
      margin-top: .85rem;
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: .6rem;
      text-align:center;
    }
    .mini{
      padding: .6rem .5rem;
      border-radius: var(--r);
      background: rgba(2,9,17,.25);
      border: 1px solid rgba(148,163,184,.16);
    }
    .mini .k{ font-size: .7rem; color: rgba(232,238,246,.60); font-weight: 800; }
    .mini .v{ margin-top: .15rem; font-size: .9rem; font-weight: 950; color: rgba(255,255,255,.88); }

    .footrow{
      margin-top: .8rem;
      display:flex;
      flex-direction:column;
      gap:.25rem;
      align-items:flex-end;
      font-size: .74rem;
      color: rgba(232,238,246,.58);
    }

    /* ========= ä½ çš„ETFé…å¤šå°‘ï¼ˆå·¥å…·å¡ï¼‰ ========= */
    .tool-card{
      border-radius: calc(var(--r) + 8px);
      padding: 1.05rem 1.05rem 1rem;
      background:
        radial-gradient(240px 200px at 20% 0%, rgba(255,213,79,.12), transparent 60%),
        linear-gradient(135deg, rgba(6,37,44,.86), rgba(5,43,52,.82));
      border: 1px solid rgba(148,163,184,.20);
      box-shadow: 0 18px 40px rgba(0,0,0,.45);
    }
    .tool-card h3{
      font-size: 1.05rem;
      font-weight: 1000;
      color: rgba(255,255,255,.92);
    }
    .tool-card p{
      color: rgba(232,238,246,.66);
      font-size: .86rem;
      line-height: 1.7;
    }
    .field-label{
      font-size: .75rem;
      color: rgba(232,238,246,.62);
      font-weight: 800;
      margin-bottom: .25rem;
    }
    .field{
      width:100%;
      border-radius: 14px;
      background: rgba(2,9,17,.35);
      border: 1px solid rgba(148,163,184,.18);
      color: rgba(255,255,255,.90);
      padding: .7rem .85rem;
      outline: none;
      transition: border-color .18s, box-shadow .18s;
    }
    .field:focus{
      border-color: rgba(255,213,79,.38);
      box-shadow: 0 0 0 3px rgba(255,213,79,.12);
    }
    .tool-result{
      margin-top: .85rem;
      padding: .9rem .95rem;
      border-radius: var(--r);
      background: rgba(2,9,17,.25);
      border: 1px solid rgba(148,163,184,.16);
      color: rgba(232,238,246,.82);
      line-height: 1.75;
      font-size: .9rem;
    }
    .tool-result strong{ color: rgba(255,255,255,.92); }
    .tool-result .money{
      color: rgba(255,213,79,.98);
      font-weight: 1000;
      font-size: 1.05rem;
    }

    /* ========= æ”¶ç›Šçµ„æˆå¡ç‰‡ ========= */
    .card-common{
      border-radius: calc(var(--r) + 8px);
      background:
        radial-gradient(260px 220px at 15% 10%, rgba(29,74,53,.42), transparent 62%),
        radial-gradient(260px 220px at 92% 20%, rgba(10,58,106,.36), transparent 62%),
        linear-gradient(135deg, rgba(6,37,44,.86), rgba(5,43,52,.82));
      border: 1px solid rgba(148,163,184,.20);
      box-shadow: 0 18px 40px rgba(0,0,0,.45);
      padding: 1.05rem 1.05rem 1rem;
      color: rgba(232,238,246,.92);
      transition: transform .18s, box-shadow .18s, border-color .18s;
      position: relative;
    }
    .card-common:hover{
      transform: translateY(-4px);
      border-color: rgba(255,213,79,.22);
      box-shadow: 0 22px 50px rgba(0,0,0,.55);
    }
    .card-common h3{
      font-size: 1.05rem;
      font-weight: 1000;
      color: rgba(255,213,79,.98);
      margin-bottom: .15rem;
    }
    .card-common .etf-name{
      font-size: .82rem;
      color: rgba(232,238,246,.62);
      margin-bottom: .75rem;
      font-weight: 800;
    }
    .highlight{
      background: rgba(2,9,17,.30);
      border: 1px solid rgba(148,163,184,.14);
      padding: .7rem .6rem;
      border-radius: 16px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
    }
    .highlight .t{ font-size:.7rem; color: rgba(232,238,246,.62); font-weight: 800; }
    .highlight .v{ margin-top:.1rem; font-size: .95rem; font-weight: 1000; color: rgba(255,255,255,.90); }

    /* ========= äºŒä»£å¥ä¿å€ ========= */
    .info-panel{
      border-radius: calc(var(--r) + 6px);
      background: rgba(2,9,17,.28);
      border: 1px solid rgba(148,163,184,.16);
      padding: 1rem;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
      color: rgba(232,238,246,.78);
    }
    .info-panel h4{
      font-size: 1rem;
      font-weight: 1000;
      color: rgba(255,255,255,.92);
      margin-bottom: .45rem;
    }
    .info-panel li{
      margin: .25rem 0;
      line-height: 1.7;
      font-size: .86rem;
    }

    /* ========= é…æ¯æ™‚é–“è¡¨ ========= */
    .timeline-card{
      border-radius: calc(var(--r) + 8px);
      background:
        radial-gradient(260px 220px at 18% 5%, rgba(255,213,79,.12), transparent 65%),
        linear-gradient(135deg, rgba(6,37,44,.86), rgba(5,43,52,.82));
      border: 1px solid rgba(148,163,184,.20);
      box-shadow: 0 18px 40px rgba(0,0,0,.45);
      padding: 1rem;
      margin-bottom: 1rem;
    }
    .timeline-head{
      display:flex;
      align-items:center;
      gap:.5rem;
      font-weight: 1000;
      color: rgba(255,255,255,.92);
      margin-bottom: .75rem;
    }
    .tag-date{
      font-size: .72rem;
      padding: .3rem .55rem;
      border-radius: 999px;
      background: rgba(255,213,79,.12);
      border: 1px solid rgba(255,213,79,.22);
      color: rgba(255,213,79,.98);
    }
    .timeline-row{
      display:grid;
      grid-template-columns: 90px 1fr 140px;
      gap: .6rem;
      padding: .6rem 0;
      border-top: 1px solid rgba(148,163,184,.14);
      color: rgba(232,238,246,.82);
      font-size: .88rem;
      align-items:start;
    }
    .timeline-row:first-child{ border-top: none; padding-top: 0; }
    .timeline-code{ font-weight: 1000; color: rgba(255,213,79,.98); }
    .timeline-name{ color: rgba(232,238,246,.80); word-break: break-word; }
    .timeline-val{ text-align:right; color: rgba(255,255,255,.86); font-weight: 900; }

    @media (max-width: 520px){
      .timeline-row{ grid-template-columns: 80px 1fr; }
      .timeline-val{ grid-column: 1 / -1; text-align:left; opacity:.9; }
    }

    /* ========= Footer ========= */
    footer{
      margin-top: 2.5rem;
      padding: 2rem 1rem 2.5rem;
      background: linear-gradient(180deg, rgba(2,9,17,.35), rgba(2,9,17,.20));
      border-top: 1px solid rgba(148,163,184,.16);
      color: rgba(232,238,246,.62);
      font-size: .8rem;
    }
    .footer-shell{
      max-width: 1100px;
      margin: 0 auto;
      display:grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
    }
    @media (min-width: 768px){
      .footer-shell{ grid-template-columns: 1fr 1fr; }
    }
    .footer-shell a{ color: rgba(255,213,79,.92); text-decoration:none; font-weight: 900; }
    .footer-shell a:hover{ text-decoration: underline; }
    .risk li{ margin:.25rem 0; line-height: 1.7; }

    /* è®“ Tailwind çš„ text-gray-XXX ä¸æŠŠæ·±è‰²UIå¼„ç°åˆ°åº• */
    .tw-muted{ color: rgba(232,238,246,.62) !important; }
  </style>
</head>

<body>
  <div class="starfield"></div>

  <!-- æ‰‹æ©Ÿé¸å–® -->
  <button class="nav-toggle" onclick="toggleNav()">â˜° é¸å–®</button>

  <!-- å°è¦½ -->
  <div class="nav-bar-wrapper">
    <div class="nav-shell">
      <div class="brand">
        <div class="brand-badge">M</div>
        <div class="brand-title">
          <strong>é¦¬å…‹ç†è²¡å·¥å…·ç®±</strong>
          <span>æ·±ç¶  Ã— æ·±è—ï½œæŠŠé…æ¯è®Šæˆä½ çš„å„€è¡¨æ¿</span>
        </div>
      </div>

      <div id="navBar" class="nav-bar">
        <a href="#wall">ç€‘å¸ƒç‰†</a>
        <a href="#my-dividend">é€™æœŸé…å¤šå°‘ï¼Ÿ</a>
        <a href="#timeline">å…¥å¸³æ™‚é–“è¡¨</a>
        <a href="https://markmoneylife.com/etf-compound/">è¤‡åˆ©è©¦ç®—</a>
        <a href="https://markmoneylife.com/retire-reverse/">é€€ä¼‘å€’æ¨</a>
        <a href="https://markmoneylife.com/newbie-village/">æ–°æ‰‹æŠ•è³‡æ‘</a>
        <a href="https://markmoneylife.com/etf-tracker/">ETFè¿½è¹¤ç‰†</a>
        <a class="cta" href="https://forms.gle/DKRoQizqLVBCe7Dj6" target="_blank">åŠ å…¥LINEç¤¾ç¾¤</a>
      </div>
    </div>
  </div>

  <main class="page-shell">
    <!-- Hero -->
    <section id="wall" class="hero">
      <h1>ETF é…æ¯åœ–å¡ç€‘å¸ƒç‰†</h1>
      <p>æ®–åˆ©ç‡ã€é™¤æ¯/é…ç™¼æ—¥ã€æ”¶ç›Šçµ„æˆä¸€æ¬¡çœ‹æ‡‚ã€‚é…æ¯æ˜¯ç¾é‡‘æµï¼Œä¸æ˜¯ä¿è­‰ç²åˆ©â€”â€”ä½†è‡³å°‘å…ˆæŠŠæ•¸å­—çœ‹æ¸…æ¥šã€‚</p>

      <div class="meta-row">
        <span class="meta-pill">
          ğŸ“Š è³‡æ–™ä¾†æºï¼š
          <a href="https://www.twse.com.tw/zh/ETFortune/announcementList" target="_blank">è‡ºç£è­‰åˆ¸äº¤æ˜“æ‰€</a>
        </span>
        <span class="meta-pill" id="last-update">æ›´æ–°æ™‚é–“ï¼šâ€”</span>
      </div>

      <!-- æ¨¡å¼åˆ‡æ› -->
      <div class="mode-switch" id="mode-switch">
        <button data-mode="forecast" class="btn btn-primary">é ä¼°é…æ¯æ¨¡å¼</button>
        <button data-mode="distribution" class="btn btn-ghost">æ”¶ç›Šçµ„æˆæ¨¡å¼</button>
      </div>
    </section>

    <!-- ä½ çš„ETFé€™æœŸé…å¤šå°‘ï¼Ÿ -->
    <section id="my-dividend" class="section-card">
      <div class="section-title">
        <h2>ğŸ§® ä½ çš„ ETF é€™æœŸé…å¤šå°‘ï¼Ÿ</h2>
        <div class="hint">ç”¨ç•¶æœˆè³‡æ–™ä¼°ç®—ï¼ˆä»¥æ¯è‚¡é…æ¯ Ã— 1000 è‚¡ Ã— å¼µæ•¸ï¼‰</div>
      </div>

      <p style="color: rgba(232,238,246,.66); font-size:.88rem; line-height:1.7; margin-bottom:.9rem;">
        è¼¸å…¥ ETF ä»£è™Ÿï¼‹æŒæœ‰å¼µæ•¸ï¼Œå¹«ä½ ä¼°ç®—æœ¬æœŸå¤§æ¦‚å¯ä»¥é ˜å¤šå°‘é…æ¯ã€‚è‹¥æœ¬æœŸå°šæœªå…¬å‘Šã€Œå¯¦éš›é…æ¯ã€ï¼Œå°±ç”¨ã€Œé ä¼°é…æ¯ã€å…ˆæŠ“å€‹ç¯„åœã€‚
      </p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
        <div>
          <div class="field-label">ETF ä»£è™Ÿï¼ˆä¾‹å¦‚ï¼š00919ã€00713ï¼‰</div>
          <input id="my-dividend-code" class="field" type="text" placeholder="è«‹è¼¸å…¥ETFä»£è™Ÿ" />
        </div>
        <div>
          <div class="field-label">æŒæœ‰å¼µæ•¸</div>
          <input id="my-dividend-lots" class="field" type="number" min="1" step="1" value="1" />
        </div>
        <div>
          <button id="my-dividend-btn" class="btn btn-primary w-full">å¹«æˆ‘ç®—é€™æ¬¡å¯ä»¥é ˜å¤šå°‘</button>
        </div>
      </div>

      <div id="my-dividend-result" class="tool-result">è¼¸å…¥å¾ŒæŒ‰ä¸‹æŒ‰éˆ•ï¼Œæˆ‘æœƒæŠŠä¼°ç®—çµæœæ”¾åœ¨é€™è£¡ã€‚</div>
    </section>

    <!-- æ¨¡å¼ï¼šé ä¼°é…æ¯ -->
    <section id="mode-forecast" class="section-card">
      <div class="section-title">
        <h2>ğŸ¥‡ å‰äº”åå–®æœŸæ®–åˆ©ç‡</h2>
        <div class="hint">ä»¥ã€Œé ä¼°é…æ¯ Ã· æ”¶ç›¤åƒ¹ã€è¨ˆç®—ï¼ˆåƒ…ä¾›åƒè€ƒï¼‰</div>
      </div>
      <div id="top5-cards" class="top5-grid"></div>

      <div id="loading" class="text-center" style="color: rgba(232,238,246,.62); font-size:.9rem; margin: .9rem 0 0;">è¼‰å…¥ä¸­...</div>
      <div id="card-container" class="grid-cards" style="margin-top: 1rem;"></div>
    </section>

    <!-- æ¨¡å¼ï¼šæ”¶ç›Šçµ„æˆ -->
    <section id="mode-distribution" class="section-card" style="display:none;">
      <div class="section-title">
        <h2>ğŸ“Š æœ¬æœˆé…æ¯æ”¶ç›Šçµ„æˆ</h2>
        <div class="hint">è‚¡åˆ©/åˆ©æ¯/å¹³æº–é‡‘/è³‡æœ¬åˆ©å¾—/å…¶ä»–æ‰€å¾—</div>
      </div>

      <div class="info-panel">
        <h4>äºŒä»£å¥ä¿è£œå……ä¿è²»ç°¡ä»‹ï¼ˆè¶…ç²¾ç°¡ï¼‰</h4>
        <ul class="list-disc pl-5">
          <li>è²»ç‡å›ºå®š 2.11ï¼…</li>
          <li>é‡å°ã€Œå–®ä½è–ªè³‡å·®é¡ã€æˆ–ã€Œå–®æ¬¡æ‰€å¾—ã€åŠ å¾µ</li>
          <li>å–®æ¬¡çµ¦ä»˜ â‰¥ 20,000 å…ƒï¼ˆå¹´çµ‚ã€åˆ©æ¯ã€è‚¡åˆ©ç­‰ï¼‰å¯èƒ½éœ€æ‰£</li>
          <li>è‹¥æ‰€å¾—æœªé”åŸºæœ¬å·¥è³‡æˆ–å±¬å…­é¡å¼±å‹¢ï¼Œå¯ä¾è¦å®šç”³è«‹å…æ‰£</li>
        </ul>
      </div>

      <div id="composition-container" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3" style="margin-top: 1rem;"></div>
    </section>

    <!-- å…¥å¸³æ™‚é–“è¡¨ -->
    <section id="timeline" class="section-card" style="margin-top: 1.2rem;">
      <div class="section-title">
        <h2 id="timeline-header">ğŸ“… æœ¬æœˆ ETF é…æ¯å…¥å¸³æ™‚é–“è¡¨</h2>
        <div class="hint">ä½ æœ€åœ¨æ„çš„ï¼šéŒ¢ä»€éº¼æ™‚å€™é€²ä¾†</div>
      </div>
      <p style="color: rgba(232,238,246,.66); font-size:.88rem; line-height:1.7; margin-bottom:.9rem;">
        ä»¥ä¸‹ç‚ºæœ¬æœˆå¯¦éš›ç™¼æ”¾æ—¥è³‡æ–™ã€‚æé†’ä¸€å¥ï¼šé…æ¯â‰ ç²åˆ©ï¼Œè©²ä¸è©²è¿½ã€è¦ä¸è¦è£œï¼Œé‚„æ˜¯è¦çœ‹ä½ è‡ªå·±çš„ç´€å¾‹èˆ‡é¢¨éšªæ‰¿å—åº¦ã€‚
      </p>
      <div id="dividendList"></div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-shell">
      <div>
        <div style="font-weight: 1000; color: rgba(255,255,255,.88); margin-bottom:.4rem;">è³‡æ–™ä¾†æºèˆ‡ä½œè€…</div>
        <div style="line-height:1.8;">
          ğŸ“Š è³‡æ–™ä¾†æºï¼š
          <a href="https://www.twse.com.tw/zh/ETFortune/announcementList" target="_blank">è‡ºç£è­‰åˆ¸äº¤æ˜“æ‰€</a><br/>
          ğŸ¬ è£½ä½œï¼šå³é¦¬å…‹
        </div>
      </div>

      <div>
        <div style="font-weight: 1000; color: rgba(255,255,255,.88); margin-bottom:.4rem;">æŠ•è³‡é¢¨éšªæç¤º</div>
        <ul class="risk list-disc pl-5">
          <li>åŸºé‡‘é…æ¯ç‡â‰ å ±é…¬ç‡ï¼Œéå»é…æ¯ä¸ä»£è¡¨æœªä¾†ç¸¾æ•ˆã€‚</li>
          <li>æœ¬é è³‡æ–™åƒ…ä¾›æŠ•è³‡ç´€éŒ„åˆ†äº«èˆ‡ç†è²¡æ•™è‚²ï¼Œéå€‹åˆ¥åŒ–æŠ•è³‡å»ºè­°ã€‚</li>
          <li>ETF ç­‰é‡‘èå•†å“æœ‰æ¼²æœ‰è·Œï¼Œè«‹å¯©æ…è©•ä¼°è‡ªèº«é¢¨éšªæ‰¿å—åº¦ã€‚</li>
          <li>å¦‚éœ€å°ˆæ¥­å»ºè­°ï¼Œè«‹è«®è©¢åˆæ ¼é‡‘èé¡§å•ã€‚</li>
        </ul>
      </div>
    </div>

    <div style="text-align:center; margin-top: 1.2rem;">
      <a href="#" style="font-weight: 1000;">â†‘ å›åˆ°é ‚éƒ¨</a>
    </div>
  </footer>

  <script>
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSYJzDEa1_U_eq_Wh_Sr6VcSLENN2-Uit1wHBmx5qZS_-2EOg0WNAeSBg1lK4blObR3R88nH08j074W/pub?gid=122705340&single=true&output=csv';

    // ğŸ”¹ å…¨åŸŸè®Šæ•¸ï¼šå…¨éƒ¨è³‡æ–™ + ç•¶å‰å¹´æœˆ
    let allData = [];
    let currentYear = null;
    let currentMonth = null;

    // æ‰‹æ©Ÿé¸å–®
    function toggleNav() {
      const nav = document.getElementById('navBar');
      nav.classList.toggle('active');
    }

    // å·¥å…·ï¼šä»£è™Ÿå»æ‰å‰ç½® 0
    function normalizeCode(code) {
      return (code || '').toString().trim().replace(/^0+/, '');
    }

    // å·¥å…·ï¼šæ•¸å­—æ ¼å¼åŒ–
    function formatAmount(n, digits = 2) {
      if (n === null || n === undefined || isNaN(n)) return '-';
      return Number(n).toLocaleString('zh-TW', {
        minimumFractionDigits: digits,
        maximumFractionDigits: digits
      });
    }

    // ğŸ”¹ æ‰¾ã€Œä¸Šä¸€ç­†é…æ¯ç´€éŒ„ã€
    function findPreviousDividendRecord(etfCode, curYear, curMonth) {
      const target = normalizeCode(etfCode);
      let best = null;

      allData.forEach(r => {
        const code = normalizeCode(r['è‚¡è™Ÿ'] || r['è‚¡ç¥¨ä»£è™Ÿ']);
        if (!code || code !== target) return;

        const y = parseInt(r['è¥¿å…ƒ'], 10);
        const m = parseInt(r['æœˆä»½'], 10);
        if (isNaN(y) || isNaN(m)) return;

        // åªçœ‹æœ¬æœŸä¹‹å‰
        if (y < curYear || (y === curYear && m < curMonth)) {
          if (!best) {
            best = r;
          } else {
            const by = parseInt(best['è¥¿å…ƒ'], 10);
            const bm = parseInt(best['æœˆä»½'], 10);
            if (y > by || (y === by && m > bm)) {
              best = r;
            }
          }
        }
      });

      return best;
    }

    // å‰äº”åæ’è¡Œ
    function renderTop5(data) {
      const c = document.getElementById('top5-cards');
      c.innerHTML = '';
      const list = data
        .filter(r => r['é ä¼°é…æ¯'] && r['æ”¶ç›¤åƒ¹'])
        .map(r => {
          const est = parseFloat(r['é ä¼°é…æ¯']);
          const close = parseFloat(r['æ”¶ç›¤åƒ¹']);
          const rate = close ? (est / close) * 100 : NaN;
          return {
            code: r['è‚¡è™Ÿ'] || r['è‚¡ç¥¨ä»£è™Ÿ'],
            name: r['è‚¡ç¥¨åç¨±'],
            rate
          };
        })
        .filter(r => !isNaN(r.rate))
        .sort((a, b) => b.rate - a.rate)
        .slice(0, 5);

      const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰', '4ï¸âƒ£', '5ï¸âƒ£'];

      list.forEach((r, i) => {
        const card = document.createElement('div');
        card.className = 'top5-card';
        card.innerHTML = `
          <div style="font-size:2rem; margin-bottom:.2rem;">${medals[i]}</div>
          <div class="code">${r.code}</div>
          <div class="name">${r.name || ''}</div>
          <div class="rate">${r.rate.toFixed(2)}%</div>
        `;
        c.appendChild(card);
      });
    }

    // ğŸ”¹ ç€‘å¸ƒç‰†å¡ç‰‡ï¼ˆå«ã€Œèˆ‡ä¸Šæ¬¡é…æ¯æ¯”è¼ƒã€ï¼‰
    function renderCards(data) {
      const c = document.getElementById('card-container');
      c.innerHTML = '';
      document.getElementById('loading').style.display = 'none';

      data.forEach(r => {
        const code = r['è‚¡è™Ÿ'];
        const name = r['è‚¡ç¥¨åç¨±'];
        const freq = r['é…æ¯é »ç‡'] || '';
        const close = r['æ”¶ç›¤åƒ¹'] || '-';
        const yieldRate = r['å–®æœŸæ®–åˆ©ç‡'] || '-';
        const exDate = r['é™¤æ¯æ—¥'] || '-';
        const payDate = r['ç™¼æ”¾æ—¥'] || '-';
        const estDivRaw = r['é ä¼°é…æ¯'];
        const actualDivRaw = r['å¯¦éš›é…æ¯'];
        const curDiv = parseFloat(actualDivRaw || estDivRaw || '0');

        // æ‰¾ä¸Šä¸€ç­†é…æ¯
        const prev = findPreviousDividendRecord(code, currentYear, currentMonth);
        let diffHtml = 'è¼ƒä¸Šæ¬¡é…æ¯ï¼šâ€”';

        if (prev) {
          const prevDiv = parseFloat(prev['å¯¦éš›é…æ¯'] || prev['é ä¼°é…æ¯'] || '0');
          if (curDiv > 0 && prevDiv > 0) {
            const diff = curDiv - prevDiv;
            const pct = (diff / prevDiv) * 100;

            let arrow = 'â–¬';
            let color = 'rgba(232,238,246,.62)';
            if (diff > 0) { arrow = 'â–²'; color = 'rgba(52,211,153,.95)'; }
            else if (diff < 0) { arrow = 'â–¼'; color = 'rgba(248,113,113,.95)'; }

            diffHtml = `è¼ƒä¸Šæ¬¡é…æ¯ï¼š<span style="color:${color}; font-weight:1000;">${arrow} ${diff > 0 ? '+' : ''}${diff.toFixed(3)} å…ƒï¼ˆ${diff > 0 ? '+' : ''}${pct.toFixed(1)}%ï¼‰</span>`;
          }
        }

        const card = document.createElement('div');
        card.className = 'etf-card';
        card.innerHTML = `
          <div class="head">
            <div class="code-big">${code}</div>
            <div class="badge-freq">${freq}</div>
          </div>
          <div class="etf-name">${name}</div>

          <div class="two-box">
            <div class="info-box accent">
              <div class="label">${actualDivRaw ? 'å¯¦éš›é…æ¯' : 'é ä¼°é…æ¯'}</div>
              <div class="value">${actualDivRaw || estDivRaw || '-'}</div>
            </div>
            <div class="info-box">
              <div class="label">æœ€å¾Œè²·é€²æ—¥</div>
              <div class="value" style="font-size:1.05rem;">${r['æœ€å¾Œè²·é€²æ—¥'] || '-'}</div>
            </div>
          </div>

          <div class="mini-grid">
            <div class="mini">
              <div class="k">æ”¶ç›¤åƒ¹</div>
              <div class="v">${close}</div>
            </div>
            <div class="mini">
              <div class="k">æ®–åˆ©ç‡</div>
              <div class="v">${yieldRate}</div>
            </div>
            <div class="mini">
              <div class="k">é™¤æ¯æ—¥</div>
              <div class="v">${exDate}</div>
            </div>
          </div>

          <div class="footrow">
            <div>é…ç™¼æ—¥ï¼š${payDate}</div>
            <div>${diffHtml}</div>
          </div>
        `;
        c.appendChild(card);
      });
    }

    // æ”¶ç›Šçµ„æˆå¡ç‰‡
    function renderComposition(data) {
      const comp = document.getElementById('composition-container');
      comp.innerHTML = '';
      data.forEach(r => {
        const card = document.createElement('div');
        card.className = 'card-common';
        card.innerHTML = `
          <h3>${r['è‚¡è™Ÿ']}</h3>
          <div class="etf-name">${r['è‚¡ç¥¨åç¨±'] || ''}</div>
          <div class="grid grid-cols-3 gap-3">
            <div class="highlight"><div class="t">å¹´åˆè‡³ä»Šå ±é…¬</div><div class="v">${r['å¹´åˆè‡³ä»Šå ±é…¬'] || '-'}</div></div>
            <div class="highlight"><div class="t">å¯¦éš›é…æ¯</div><div class="v">${r['å¯¦éš›é…æ¯'] || '-'}</div></div>
            <div class="highlight"><div class="t">è‚¡åˆ©æ‰€å¾—</div><div class="v">${r['è‚¡åˆ©æ‰€å¾—'] || '-'}</div></div>
            <div class="highlight"><div class="t">54C</div><div class="v">${r['54C'] || '-'}</div></div>
            <div class="highlight"><div class="t">åˆ©æ¯æ‰€å¾—</div><div class="v">${r['åˆ©æ¯æ‰€å¾—'] || '-'}</div></div>
            <div class="highlight"><div class="t">æ”¶ç›Šå¹³æº–é‡‘</div><div class="v">${r['æ”¶ç›Šå¹³æº–é‡‘'] || '-'}</div></div>
            <div class="highlight"><div class="t">è³‡æœ¬åˆ©å¾—</div><div class="v">${r['è³‡æœ¬åˆ©å¾—'] || '-'}</div></div>
            <div class="highlight"><div class="t">å…¶ä»–æ‰€å¾—</div><div class="v">${r['å…¶ä»–æ‰€å¾—'] || '-'}</div></div>
            <div class="highlight"><div class="t">å¥ä¿æ‡‰èª²å¼µæ•¸</div><div class="v">${r['å¥ä¿æ‡‰èª²å¼µæ•¸'] || '-'}</div></div>
          </div>`;
        comp.appendChild(card);
      });
    }

    // é…æ¯æ™‚é–“è¡¨
    function renderTimeline(data) {
      const div = document.getElementById('dividendList');
      div.innerHTML = '';

      if (data.length === 0) {
        div.innerHTML = '<p style="text-align:center; color: rgba(232,238,246,.62);">âš ï¸ æœ¬æœˆç„¡é…æ¯å…¥å¸³è³‡æ–™</p>';
        return;
      }

      const groups = {};
      data.forEach(r => {
        const date = (r['ç™¼æ”¾æ—¥'] || '').trim();
        if (!date) return;
        groups[date] = groups[date] || [];
        groups[date].push(r);
      });

      Object.keys(groups).sort((a, b) => new Date(a) - new Date(b)).forEach(date => {
        const card = document.createElement('div');
        card.className = 'timeline-card';

        card.innerHTML = `
          <div class="timeline-head">
            <span class="tag-date">ç™¼æ”¾æ—¥</span>
            <span>${date}</span>
          </div>
          <div>
            ${groups[date].map(etf => `
              <div class="timeline-row">
                <div class="timeline-code">${etf['è‚¡è™Ÿ']}</div>
                <div class="timeline-name">${etf['è‚¡ç¥¨åç¨±'] || ''}</div>
                <div class="timeline-val">æ¯è‚¡ ${(etf['å¯¦éš›é…æ¯'] || etf['é ä¼°é…æ¯'] || '-')} å…ƒ</div>
              </div>
            `).join('')}
          </div>
        `;
        div.appendChild(card);
      });
    }

    // ğŸ”¹ ä½ çš„ETFé…æ¯è©¦ç®—
    function handleMyDividendCalc() {
      const codeInput = document.getElementById('my-dividend-code').value;
      const lotsInput = document.getElementById('my-dividend-lots').value;
      const resultDiv = document.getElementById('my-dividend-result');

      if (!allData || allData.length === 0) {
        resultDiv.innerHTML = 'è³‡æ–™å°šæœªè¼‰å…¥å®Œæˆï¼Œè«‹ç¨å€™å†è©¦ ğŸ™';
        return;
      }

      const lots = parseFloat(lotsInput || '0');
      if (!codeInput || !lots || lots <= 0) {
        resultDiv.innerHTML = 'è«‹è¼¸å…¥æ­£ç¢ºçš„ ETF ä»£è™Ÿèˆ‡æŒæœ‰å¼µæ•¸å“¦ï¼';
        return;
      }

      const norm = normalizeCode(codeInput);

      // åªçœ‹ç•¶æœˆè³‡æ–™
      const candidates = allData.filter(r => {
        const y = parseInt(r['è¥¿å…ƒ'], 10);
        const m = parseInt(r['æœˆä»½'], 10);
        const code = normalizeCode(r['è‚¡è™Ÿ'] || r['è‚¡ç¥¨ä»£è™Ÿ']);
        return y === currentYear && m === currentMonth && code === norm;
      });

      if (!candidates.length) {
        resultDiv.innerHTML = `æ‰¾ä¸åˆ°ç•¶æœˆä»£è™Ÿ <strong style="font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;">${codeInput}</strong> çš„é…æ¯è³‡æ–™ï¼Œå¯èƒ½æœ¬æœŸæ²’æœ‰é…æ¯ï¼Œæˆ–ä»£è™Ÿè¼¸å…¥æœ‰èª¤ã€‚`;
        return;
      }

      const r = candidates[0];
      const code = r['è‚¡è™Ÿ'];
      const name = r['è‚¡ç¥¨åç¨±'];
      const exDate = r['é™¤æ¯æ—¥'] || '-';
      const payDate = r['ç™¼æ”¾æ—¥'] || '-';
      const actualDivRaw = r['å¯¦éš›é…æ¯'];
      const estDivRaw = r['é ä¼°é…æ¯'];
      const perShare = parseFloat(actualDivRaw || estDivRaw || '0');

      if (!perShare) {
        resultDiv.innerHTML = `æœ‰æ‰¾åˆ° <strong>${code}</strong>ï¼ˆ${name}ï¼‰ï¼Œä½†æœ¬æœŸé…æ¯é‡‘é¡å°šæœªå…¬å¸ƒï¼ˆæˆ–è³‡æ–™ç‚ºç©ºï¼‰ï¼Œæš«æ™‚ç„¡æ³•ä¼°ç®— ğŸ’­`;
        return;
      }

      const perLot = perShare * 1000;
      const total = perLot * lots;
      const label = actualDivRaw ? 'å¯¦éš›é…æ¯' : 'é ä¼°é…æ¯';

      // æ‰¾ä¸Šä¸€ç­†é…æ¯ï¼Œé †ä¾¿é¡¯ç¤ºå‡/é™
      const prev = findPreviousDividendRecord(code, currentYear, currentMonth);
      let prevText = 'è¼ƒä¸Šæ¬¡é…æ¯ï¼šâ€”';
      if (prev) {
        const prevDiv = parseFloat(prev['å¯¦éš›é…æ¯'] || prev['é ä¼°é…æ¯'] || '0');
        if (prevDiv > 0) {
          const diff = perShare - prevDiv;
          const pct = (diff / prevDiv) * 100;
          let arrow = 'â–¬';
          let color = 'rgba(232,238,246,.62)';
          if (diff > 0) { arrow = 'â–²'; color = 'rgba(52,211,153,.95)'; }
          else if (diff < 0) { arrow = 'â–¼'; color = 'rgba(248,113,113,.95)'; }

          prevText = `è¼ƒä¸Šæ¬¡é…æ¯ï¼š<span style="color:${color}; font-weight:1000;">${arrow} ${diff > 0 ? '+' : ''}${diff.toFixed(3)} å…ƒï¼ˆ${diff > 0 ? '+' : ''}${pct.toFixed(1)}%ï¼‰</span>`;
        }
      }

      resultDiv.innerHTML = `
        <div style="display:grid; gap:.35rem;">
          <div>ä½ æŒæœ‰ <strong>${lots}</strong> å¼µ <strong>${code}</strong>ï¼ˆ${name}ï¼‰ã€‚</div>
          <div>æœ¬æœŸæ¯è‚¡${label}ï¼š<strong>${perShare.toFixed(3)} å…ƒ</strong>ï¼Œæ¯å¼µç´„ï¼š<strong>${formatAmount(perLot)} å…ƒ</strong>ã€‚</div>
          <div>ğŸ‘‰ æœ¬æœŸé ä¼°å¯é ˜é…æ¯ç´„ï¼š<span class="money">${formatAmount(total)} å…ƒ</span></div>
          <div style="font-size:.8rem; color: rgba(232,238,246,.62);">é™¤æ¯æ—¥ï¼š${exDate}ï½œé…ç™¼æ—¥ï¼š${payDate}</div>
          <div style="font-size:.82rem;">${prevText}</div>
        </div>
      `;
    }

    // è®€å– CSV ä¸¦æ¸²æŸ“
    Papa.parse(csvUrl, {
      download: true,
      header: true,
      complete(results) {
        allData = results.data || [];

        const now = new Date();
        currentYear = now.getFullYear();
        currentMonth = now.getMonth() + 1;

        const upd = allData[0]?.['æ›´æ–°æ—¥æœŸ'] || '';
        if (upd) document.getElementById('last-update').textContent = `æ›´æ–°æ™‚é–“ï¼š${upd}`;

        const monthData = allData.filter(r =>
          parseInt(r['è¥¿å…ƒ'], 10) === currentYear &&
          parseInt(r['æœˆä»½'], 10) === currentMonth
        );

        renderTop5(monthData);
        renderCards(monthData);
        renderComposition(monthData);

        const timelineData = allData.filter(r => {
          const dStr = (r['ç™¼æ”¾æ—¥'] || '').trim();
          if (!dStr) return false;
          const parts = dStr.split('/');
          const mon = parts.length === 3 ? +parts[1] : +parts[0];
          return parseInt(r['è¥¿å…ƒ'], 10) === currentYear && mon === currentMonth;
        });
        renderTimeline(timelineData);

        document.getElementById('timeline-header').textContent =
          `ğŸ“… ${currentYear}å¹´ ${String(currentMonth).padStart(2, '0')}æœˆ ETFé…æ¯å…¥å¸³æ™‚é–“è¡¨`;
      }
    });

    // æ¨¡å¼åˆ‡æ›
    document.querySelectorAll('#mode-switch button').forEach(btn => {
      btn.addEventListener('click', () => {
        const mode = btn.dataset.mode;

        document.getElementById('mode-forecast').style.display =
          mode === 'forecast' ? 'block' : 'none';
        document.getElementById('mode-distribution').style.display =
          mode === 'distribution' ? 'block' : 'none';

        // æŒ‰éˆ•è¦–è¦º
        document.querySelectorAll('#mode-switch button').forEach(b => {
          if (b === btn) {
            b.classList.remove('btn-ghost');
            b.classList.add('btn-primary');
          } else {
            b.classList.remove('btn-primary');
            b.classList.add('btn-ghost');
          }
        });
      });
    });

    // ğŸ”¹ ç¶å®šã€Œä½ çš„ETFé…å¤šå°‘ï¼Ÿã€æŒ‰éˆ•
    document.getElementById('my-dividend-btn').addEventListener('click', handleMyDividendCalc);
  </script>
</body>
</html>
