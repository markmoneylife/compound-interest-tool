<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ETFé…æ¯åœ–å¡ç€‘å¸ƒç‰†ï¼‹é…æ¯å…¥å¸³æ™‚é–“è¡¨ï½œå³é¦¬å…‹</title>
 <link rel="icon" href="https://markmoneylife.github.io/compound-interest-tool/logo-transparent.png" type="image/png">
  <meta name="description" content="è¦–è¦ºåŒ–é¡¯ç¤ºå°è‚¡ETFæœ€æ–°é…æ¯è³‡è¨Šèˆ‡å¯¦éš›å…¥å¸³æ™‚é–“ï¼Œè®“ä½ å¿«é€ŸæŒæ¡æ®–åˆ©ç‡èˆ‡ç™¼æ”¾æ—¥ã€‚">
  <meta name="keywords" content="ETFé…æ¯, é«˜è‚¡æ¯ETF, å°è‚¡ETF, æ®–åˆ©ç‡, ç™¼æ”¾æ—¥, å³é¦¬å…‹">
  <link rel="icon" href="https://markmoneylife.github.io/compound-interest-tool/logo-transparent.png" type="image/png">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <style>
    /* æ‰‹æ©Ÿé¸å–® */
    .nav-toggle { display: none; position: fixed; top:1rem; right:1rem; z-index:9999;
      background:#FFD54F; border:none; padding:.6rem 1rem; border-radius:.5rem;
      font-size:1.2rem; font-weight:bold; cursor:pointer; }
    .nav-bar-wrapper { background:#1D4A35; padding:1rem 0; }
    .nav-bar { max-width:1200px; margin:0 auto; display:flex; justify-content:center; flex-wrap:wrap; gap:1rem; }
    .nav-bar a { background:#FFD54F; color:#1A1A1A; font-weight:bold; text-decoration:none;
      padding:.65rem 1.2rem; border-radius:.75rem; transition:all .2s; }
    .nav-bar a:hover { background:#FFE082; transform:translateY(-2px); }
    @media (max-width:768px){
      .nav-toggle{ display:block; }
      .nav-bar{ display:none; flex-direction:column; align-items:center; }
      .nav-bar.active{ display:flex; }
      .nav-bar a{ width:90%; text-align:center; margin-bottom:.5rem; }
  
  </style>
</head>
<body class="bg-[#F5F2E9] text-gray-800">

  <!-- æ‰‹æ©Ÿé¸å–®æŒ‰éˆ• -->
  <button class="nav-toggle" onclick="toggleNav()">â˜° é¸å–®</button>
  <div class="nav-bar-wrapper">
 <div class="nav-bar">
    <a href="https://markmoneylife.github.io/compound-interest-tool/etf-dividend-wall.html">ETFé…æ¯åœ–å¡ç€‘å¸ƒç‰†</a>
    <a href="https://markmoneylife.github.io/compound-interest-tool">è¤‡åˆ©è©¦ç®—å·¥å…·</a>
    <a href="https://markmoneylife.github.io/compound-interest-tool/reverse.html">é€€ä¼‘å€’æ¨</a>
    <a href="https://markmoneylife.github.io/compound-interest-tool/newbie-village.html">æ–°æ‰‹æŠ•è³‡æ‘</a>
    <a href="https://markmoneylife.github.io/compound-interest-tool/etf-tracker.html">ETFè¿½è¹¤ç‰†</a>
    <a href="https://line.me/ti/g2/PibkZdl6-4j7vwJNd0HYAzx5EJG4FkYz4F_eHg" target="_blank">åŠ å…¥LINEç¤¾ç¾¤</a>
  </div>
</div>

  <!-- ETF ç€‘å¸ƒç‰† -->
  <section id="wall" class="max-w-5xl mx-auto px-4 mt-10">
    <h1 class="text-3xl font-bold text-center mb-2">ETFé…æ¯åœ–å¡ç€‘å¸ƒç‰†</h1>
    <p class="text-center text-sm text-gray-500 mb-4">
      è³‡æ–™ä¾†æºï¼š
      <a href="https://www.twse.com.tw/zh/ETFortune/announcementList"
         class="underline text-blue-600" target="_blank">è‡ºç£è­‰åˆ¸äº¤æ˜“æ‰€</a>
    </p>
    <div id="last-update" class="text-center text-xs text-gray-400 mb-4"></div>

    <!-- æ¨¡å¼åˆ‡æ›æŒ‰éˆ• -->
    <div id="mode-switch" class="text-center my-8">
      <button data-mode="forecast"
        class="px-4 py-2 mx-2 rounded bg-[#1D4A35] text-[#FFD54F]">
        é ä¼°é…æ¯æ¨¡å¼
      </button>
      <button data-mode="distribution"
        class="px-4 py-2 mx-2 rounded bg-gray-200 text-gray-700">
        æ”¶ç›Šçµ„æˆæ¨¡å¼
      </button>
    </div>

    <!-- é ä¼°é…æ¯æ¨¡å¼ -->
    <div id="mode-forecast">
      <div class="max-w-4xl mx-auto mb-6 text-center">
        <h2 class="text-xl font-semibold mb-1">ğŸ† æœ¬æœˆæœ€å¼·é…æ¯ ETF å‰äº”å</h2>
        <p class="text-xs text-gray-500">â€» é ä¼°é…æ¯ Ã· æ”¶ç›¤åƒ¹ï¼Œä¸ä»£è¡¨å¯¦éš›å ±é…¬ç‡ã€‚</p>
        <div id="top5-list" class="flex justify-center gap-4 items-end h-64 mt-4"></div>
      </div>
      <div id="loading" class="text-center text-sm text-gray-500 mb-4">è¼‰å…¥ä¸­...</div>
      <div id="card-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </div>

    <!-- æ”¶ç›Šçµ„æˆæ¨¡å¼ -->
    <div id="mode-distribution" class="max-w-6xl mx-auto px-4" style="display:none;">
      <h2 class="text-3xl font-bold text-[#17453B] mb-4">ğŸ“Š æœ¬æœˆé…æ¯æ”¶ç›Šçµ„æˆ</h2>
      <p class="text-sm text-gray-600 mb-6">
        ä¸€æ¬¡çœ‹æ‡‚è‚¡åˆ©ã€åˆ©æ¯ã€å¹³æº–é‡‘ã€è³‡æœ¬åˆ©å¾—ã€å…¶ä»–æ‰€å¾—ï¼Œä»¥åŠå¥ä¿æ‡‰èª²å¼µæ•¸ã€‚
      </p>
      <div id="composition-container"
           class="grid gap-6 auto-cols-fr md:grid-cols-2 lg:grid-cols-3"></div>
    </div>

  </section>

  <!-- é…æ¯æ™‚é–“è¡¨ -->
  <section id="timeline" class="max-w-3xl mx-auto mt-20 px-4">
    <h2 id="timeline-header"
        class="text-2xl font-bold text-center text-[#1D4A35] mb-4"></h2>
    <p class="text-center text-sm text-gray-600 mb-6">
      ä»¥ä¸‹ç‚ºæœ¬æœˆå¯¦éš›ç™¼æ”¾æ—¥è³‡æ–™ï¼Œå¿«é€ŸæŒæ¡éŒ¢ä»€éº¼æ™‚å€™é€²ä¾†ï¼
    </p>
    <div id="dividendList"></div>
  </section>

  <!-- Footer -->
  <footer class="mt-16 text-xs text-center text-gray-500 px-4 leading-relaxed">
    è³‡æ–™ä¾†æºï¼š
    <a href="https://www.twse.com.tw/zh/ETFortune/announcementList"
       class="underline" target="_blank">è‡ºç£è­‰åˆ¸äº¤æ˜“æ‰€</a>ï½œè£½ä½œï¼šå³é¦¬å…‹<br>
    â€» æœ¬ç¶²ç«™è³‡è¨Šåƒ…ä¾›åƒè€ƒï¼Œä¸æ§‹æˆä»»ä½•æŠ•è³‡å»ºè­°ã€‚åŸºé‡‘é…æ¯ç‡ä¸ä»£è¡¨å ±é…¬ç‡ï¼Œäº¦ä¸ä»£è¡¨æœªä¾†ç¸¾æ•ˆï¼ŒæŠ•è³‡è«‹è‡ªè¡Œè©•ä¼°é¢¨éšªã€‚
  </footer>

  <script>
  // æ‰‹æ©Ÿ nav
  function toggleNav() {
    document.getElementById('navBar').classList.toggle('active');
  }

  // è³‡æ–™ URL
  const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSYJzDEa1_U_eq_Wh_Sr6VcSLENN2-Uit1wHBmx5qZS_-2EOg0WNAeSBg1lK4blObR3R88nH08j074W/pub?gid=122705340&single=true&output=csv';
  let allData = [];

  // å‰äº”å
  function renderTop5(data) {
    const list = document.getElementById('top5-list');
    list.innerHTML = '';
    const sorted = data.filter(r=>r['é ä¼°é…æ¯']&&r['æ”¶ç›¤åƒ¹'])
      .map(r=>{
        const rate = parseFloat(r['é ä¼°é…æ¯'])/parseFloat(r['æ”¶ç›¤åƒ¹'])*100;
        return { ...r, rate:+rate.toFixed(2), formatted:`${rate.toFixed(2)}%` };
      })
      .sort((a,b)=>b.rate-a.rate).slice(0,5);
    const max = sorted[0]?.rate||1;
    ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰','ç¬¬4','ç¬¬5'].forEach((medal,i)=>{
      const r = sorted[i];
      const bar = document.createElement('div');
      bar.className = 'text-center px-4 pt-8 pb-4 rounded-xl shadow-md flex flex-col justify-end items-center';
      bar.style.background = ['#FDE68A','#FCD34D','#FEEBC8','#FEF3C7','#FEF3C7'][i];
      bar.style.height = `calc(${(r.rate/max)*120}px + 100px)`;
      bar.innerHTML = `
        <div class="text-xl mb-1">${medal}</div>
        <div class="text-base font-bold">${r['è‚¡è™Ÿ']}</div>
        <div class="text-sm font-semibold text-black">${r.formatted}</div>`;
      list.appendChild(bar);
    });
  }

  // ç€‘å¸ƒç‰†å¡ç‰‡
  function renderCards(data) {
    const c = document.getElementById('card-container');
    c.innerHTML = '';
    document.getElementById('loading').style.display = 'none';
    data.forEach(r=>{
      const card = document.createElement('div');
      card.className='bg-[#17453B] text-[#FFF8D6] p-5 rounded-2xl shadow-lg flex flex-col gap-3';
      card.innerHTML = `
        <div class="flex justify-between items-center">
          <div class="text-3xl font-bold text-yellow-400">${r['è‚¡è™Ÿ']}</div>
          <div class="text-sm bg-orange-500 text-white px-2 py-1 rounded">${r['é…æ¯é »ç‡']||''}</div>
        </div>
        <div class="text-xl font-bold mb-2">${r['è‚¡ç¥¨åç¨±']}</div>
        <div class="grid grid-cols-2 gap-2 text-center">
          <div class="bg-yellow-300 text-black p-3 rounded-lg">
            <div class="text-xs mb-1">é ä¼°é…æ¯</div>
            <div class="text-2xl font-bold">${r['é ä¼°é…æ¯']||'-'}</div>
          </div>
          <div class="bg-yellow-300 text-black p-3 rounded-lg">
            <div class="text-xs mb-1">æœ€å¾Œè²·é€²æ—¥</div>
            <div class="text-2xl font-bold">${r['æœ€å¾Œè²·é€²æ—¥']||'-'}</div>
          </div>
        </div>
        <div class="grid grid-cols-3 gap-2 text-center text-sm">
          <div><div class="text-xs text-gray-300">æ”¶ç›¤åƒ¹</div><div class="font-bold">${r['æ”¶ç›¤åƒ¹']||'-'}</div></div>
          <div><div class="text-xs text-gray-300">æ®–åˆ©ç‡</div><div class="font-bold">${r['å–®æœŸæ®–åˆ©ç‡']||'-'}</div></div>
          <div><div class="text-xs text-gray-300">é™¤æ¯æ—¥</div><div class="font-bold">${r['é™¤æ¯æ—¥']||'-'}</div></div>
        </div>
        <div class="text-xs text-right text-gray-400 mt-2">é…ç™¼æ—¥ï¼š${r['ç™¼æ”¾æ—¥']||'-'}</div>`;
      c.appendChild(card);
    });
  }

  // æ”¶ç›Šçµ„æˆå¡ç‰‡
  function renderComposition(data) {
    const comp = document.getElementById('composition-container');
    comp.innerHTML = '';
    data.forEach(r=>{
      const card = document.createElement('div');
      card.className='bg-[#FFD54F] text-[#17453B] rounded-2xl p-6 shadow-lg';
      card.innerHTML = `
       function renderComposition(data) {
  
      <h3>${r['è‚¡è™Ÿ']}</h3>
      <div class="etf-name">${r['è‚¡ç¥¨åç¨±']}</div>

      <!-- æ–°å¢ä¸€å±¤èƒŒæ™¯ -->
      <div class="bg-white/80 p-4 rounded-lg shadow-inner">
        <div class="grid grid-cols-3 gap-4 text-center text-[#17453B]">
          
          <div class="highlight">
            <div class="text-xs">å¹´åˆè‡³ä»Šå ±é…¬</div>
            <div class="text-lg">${r['å¹´åˆè‡³ä»Šå ±é…¬']||'-'}</div>
          </div>
          
          <div class="highlight">
            <div class="text-xs">å¯¦éš›é…æ¯</div>
            <div class="text-lg">${r['å¯¦éš›é…æ¯']||'-'}</div>
          </div>
          
          <div class="highlight">
            <div class="text-xs">è‚¡åˆ©æ‰€å¾—</div>
            <div class="text-lg">${r['è‚¡åˆ©æ‰€å¾—']||'-'}</div>
          </div>
          
          <div class="highlight">
            <div class="text-xs">54C</div>
            <div class="text-lg">${r['54C']||'-'}</div>
          </div>
          
          <div class="highlight">
            <div class="text-xs">åˆ©æ¯æ‰€å¾—</div>
            <div class="text-lg">${r['åˆ©æ¯æ‰€å¾—']||'-'}</div>
          </div>
          
          <div class="highlight">
            <div class="text-xs">æ”¶ç›Šå¹³æº–é‡‘</div>
            <div class="text-lg">${r['æ”¶ç›Šå¹³æº–é‡‘']||'-'}</div>
          </div>
          
          <div class="highlight">
            <div class="text-xs">è³‡æœ¬åˆ©å¾—</div>
            <div class="text-lg">${r['è³‡æœ¬åˆ©å¾—']||'-'}</div>
          </div>
          
          <div class="highlight">
            <div class="text-xs">å…¶ä»–æ‰€å¾—</div>
            <div class="text-lg">${r['å…¶ä»–æ‰€å¾—']||'-'}</div>
          </div>
          
          <div class="highlight">
            <div class="text-xs">å¥ä¿æ‡‰èª²å¼µæ•¸</div>
            <div class="text-lg">${r['å¥ä¿æ‡‰èª²å¼µæ•¸']||'-'}</div>
          </div>
        
        </div>
      </div>
    `;

    comp.appendChild(card);
  });
}


  // é…æ¯æ™‚é–“è¡¨
  function renderTimeline(data) {
    const div = document.getElementById('dividendList');
    div.innerHTML = '';
    if (data.length === 0) {
      div.innerHTML = '<p class="text-center text-gray-500">âš ï¸ æœ¬æœˆç„¡é…æ¯å…¥å¸³è³‡æ–™</p>';
      return;
    }
    const groups = {};
    data.forEach(r => {
      const date = r['ç™¼æ”¾æ—¥'].trim();
      groups[date] = groups[date] || [];
      groups[date].push(r);
    });
    Object.keys(groups).sort((a,b)=> new Date(`${a}`) - new Date(`${b}`))
      .forEach(date => {
        const card = document.createElement('div');
        card.className = 'bg-[#FFF9E0] p-4 rounded-xl shadow-md mb-6';
        card.innerHTML = `
          <div class="text-lg font-bold text-[#1D4A35] mb-3 flex items-center gap-2">
            <span class="bg-[#1D4A35] text-white text-xs px-2 py-1 rounded">ç™¼æ”¾æ—¥</span>${date}
          </div>
          <div class="divide-y divide-yellow-200">
            ${groups[date].map(etf=>`
              <div class="grid grid-cols-[90px_1fr_120px] items-start py-2 text-sm">
                <div class="font-bold text-[#1D4A35]">${etf['è‚¡è™Ÿ']}</div>
                <div class="text-gray-800 break-words">${etf['è‚¡ç¥¨åç¨±']}</div>
                <div class="text-right text-gray-700">
                  æ¯è‚¡é…æ¯ ${etf['å¯¦éš›é…æ¯']||etf['é ä¼°é…æ¯']} å…ƒ
                </div>
              </div>`).join('')}
          </div>`;
        div.appendChild(card);
      });
  }

  // è®€å– CSV ä¸¦æ¸²æŸ“
  Papa.parse(csvUrl, {
    download: true, header: true,
    complete(results) {
      allData = results.data;
      const now = new Date(),
            Y = now.getFullYear(),
            M = now.getMonth() + 1;
      const upd = allData[0]?.['æ›´æ–°æ—¥æœŸ'] || '';
      if (upd) document.getElementById('last-update').textContent = `æ›´æ–°æ™‚é–“ï¼š${upd}`;

      // æœ¬æœˆè³‡æ–™
      const monthData = allData.filter(r =>
        parseInt(r['è¥¿å…ƒ'], 10) === Y &&
        parseInt(r['æœˆä»½'], 10) === M
      );
      renderTop5(monthData);
      renderCards(monthData);
      renderComposition(monthData);

      // timeline è³‡æ–™
      const timelineData = allData.filter(r => {
        const d = (r['ç™¼æ”¾æ—¥']||'').trim().split('/');
        const mon = d.length===3 ? +d[1] : +d[0];
        return parseInt(r['è¥¿å…ƒ'],10)===Y && mon===M;
      });
      renderTimeline(timelineData);
      // é¡¯ç¤º timeline æ¨™é¡Œ
      document.getElementById('timeline-header').textContent =
        `ğŸ“… ${Y}å¹´ ${String(M).padStart(2,'0')}æœˆ ETFé…æ¯å…¥å¸³æ™‚é–“è¡¨`;
    }
  });

  // æ¨¡å¼åˆ‡æ›
  document.querySelectorAll('#mode-switch button').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const mode = btn.dataset.mode;
      document.getElementById('mode-forecast').style.display = mode==='forecast' ? 'block' : 'none';
      document.getElementById('mode-distribution').style.display = mode==='distribution' ? 'grid' : 'none';
      document.querySelectorAll('#mode-switch button').forEach(b=>{
        if (b===btn) {
          b.classList.remove('bg-gray-200','text-gray-700');
          b.classList.add('bg-[#1D4A35]','text-[#FFD54F]');
        } else {
          b.classList.remove('bg-[#1D4A35]','text-[#FFD54F]');
          b.classList.add('bg-gray-200','text-gray-700');
        }
      });
    });
  });
  </script>
</body>
</html>
